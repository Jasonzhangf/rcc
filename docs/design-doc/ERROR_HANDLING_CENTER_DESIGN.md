# RCC é”™è¯¯å¤„ç†ä¸­å¿ƒè®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº†RCCç³»ç»Ÿé”™è¯¯å¤„ç†ä¸­å¿ƒçš„è®¾è®¡æ–¹æ¡ˆã€‚é”™è¯¯å¤„ç†ä¸­å¿ƒä½œä¸ºç³»ç»Ÿæ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ç»Ÿä¸€ç®¡ç†å’Œè°ƒåº¦æ‰€æœ‰æ¨¡å—çš„é”™è¯¯å¤„ç†ç­–ç•¥ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **ç»Ÿä¸€é”™è¯¯ç®¡ç†**: æ‰€æœ‰ç³»ç»Ÿé”™è¯¯é›†ä¸­å¤„ç†ï¼Œæä¾›ä¸€è‡´çš„é”™è¯¯å¤„ç†æ¥å£
2. **æ¨¡å—åŒ–å“åº”**: ä¸åŒæ¨¡å—çš„é”™è¯¯ä½¿ç”¨å„è‡ªç‹¬ç«‹çš„å“åº”é€»è¾‘
3. **åŒæ­¥/å¼‚æ­¥å¤„ç†**: æ”¯æŒé˜»å¡å’Œéé˜»å¡çš„é”™è¯¯å¤„ç†æ¨¡å¼
4. **ç­–ç•¥åŒ–å¤„ç†**: é”™è¯¯å¤„ç†ä¸é”™è¯¯ä¸ŠæŠ¥åˆ†ç¦»ï¼Œä¸“æ³¨äºè°ƒåº¦å’Œç­–ç•¥
5. **æ¨¡å—éš”ç¦»**: æ¯ä¸ªæ¨¡å—çš„é”™è¯¯å“åº”é€»è¾‘ç‹¬ç«‹ï¼Œäº’ç›¸ä¸æ±¡æŸ“

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RCC Error Handling Center                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Error Interface â”‚  â”‚   Error Queue   â”‚  â”‚ Response Router â”‚ â”‚
â”‚  â”‚   Gateway       â”‚  â”‚   Manager        â”‚  â”‚   Engine        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Module Registry â”‚  â”‚   Policy        â”‚  â”‚ Response        â”‚ â”‚
â”‚  â”‚   Manager       â”‚  â”‚   Engine        â”‚  â”‚   Executor      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Error           â”‚  â”‚ Response        â”‚  â”‚ Module          â”‚ â”‚
â”‚  â”‚   Classifier    â”‚  â”‚   Templates     â”‚  â”‚   Adapters      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¤–éƒ¨æ¥å£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Modules       â”‚    â”‚   System        â”‚    â”‚   Monitoring    â”‚
â”‚                 â”‚    â”‚   Components    â”‚    â”‚   Tools         â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Module A    â”‚ â”‚    â”‚ â”‚ Component X â”‚ â”‚    â”‚ â”‚ Monitor Y   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚         â”‚    â”‚       â”‚         â”‚    â”‚       â”‚         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Module B    â”‚ â”‚    â”‚ â”‚ Component Y â”‚ â”‚    â”‚ â”‚ Monitor Z   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚                      â”‚                      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Error Handling Center   â”‚
                    â”‚                             â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚    Blocking Path        â”‚ â”‚
                    â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
                    â”‚ â”‚  â”‚ Error Interface â”‚    â”‚ â”‚
                    â”‚ â”‚  â”‚   Gateway - Sync â”‚    â”‚ â”‚
                    â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
                    â”‚ â”‚                             â”‚ â”‚
                    â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
                    â”‚ â”‚ â”‚  Non-Blocking Path    â”‚ â”‚ â”‚
                    â”‚ â”‚ â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”‚ â”‚
                    â”‚ â”‚ â”‚â”‚ Error Interface â”‚     â”‚ â”‚ â”‚
                    â”‚ â”‚ â”‚â”‚  Gateway-Async â”‚     â”‚ â”‚ â”‚
                    â”‚ â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â”‚ â”‚
                    â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ è¯¦ç»†è®¾è®¡

### 1. é”™è¯¯æ¥å£é—¨æ§ (Error Interface Gateway)

**èŒè´£**: ä½œä¸ºæ‰€æœ‰å¤–éƒ¨é”™è¯¯è¯·æ±‚çš„ç»Ÿä¸€å…¥å£ç‚¹

**æ¥å£è®¾è®¡**:
```typescript
interface ErrorInterfaceGateway {
  // é˜»å¡å¼é”™è¯¯å¤„ç†
  handleError(error: ErrorContext): Promise<ErrorResponse>;
  
  // éé˜»å¡å¼é”™è¯¯å¤„ç†
  handleErrorAsync(error: ErrorContext): void;
  
  // æ‰¹é‡é”™è¯¯å¤„ç†
  handleBatchErrors(errors: ErrorContext[]): Promise<ErrorResponse[]>;
  
  // æ¨¡å—æ³¨å†Œ/æ³¨é”€
  registerModule(module: ModuleRegistration): void;
  unregisterModule(moduleId: string): void;
}
```

### 2. é”™è¯¯é˜Ÿåˆ—ç®¡ç†å™¨ (Error Queue Manager)

**èŒè´£**: ç®¡ç†é”™è¯¯é˜Ÿåˆ—ï¼Œå¤„ç†ä¼˜å…ˆçº§å’Œåˆ†å‘

**æ ¸å¿ƒåŠŸèƒ½**:
- é”™è¯¯é˜Ÿåˆ—ä¼˜å…ˆçº§ç®¡ç†ï¼ˆç´§æ€¥/é«˜/ä¸­/ä½ï¼‰
- é”™è¯¯å»é‡å’Œèšåˆ
- é”™è¯¯æµæ§åˆ¶ï¼ˆé™æµ/ç†”æ–­ï¼‰
- é˜Ÿåˆ—çŠ¶æ€ç›‘æ§

### 3. å“åº”è·¯ç”±å¼•æ“ (Response Router Engine)

**èŒè´£**: æ ¹æ®é”™è¯¯ç±»å‹å’Œæ¨¡å—ä¿¡æ¯è·¯ç”±åˆ°æ­£ç¡®çš„å“åº”å¤„ç†å™¨

**è·¯ç”±ç­–ç•¥**:
```typescript
interface RoutingStrategy {
  // æŒ‰æ¨¡å—åè·¯ç”±
  routeByModuleName(moduleName: string): ResponseHandler;
  
  // æŒ‰é”™è¯¯ç±»å‹è·¯ç”±
  routeByErrorType(errorType: ErrorType): ResponseHandler;
  
  // æŒ‰é”™è¯¯çº§åˆ«è·¯ç”±
  routeBySeverity(severity: ErrorSeverity): ResponseHandler;
  
  // è‡ªå®šä¹‰è·¯ç”±è§„åˆ™
  routeByCustomRule(rule: RoutingRule): ResponseHandler;
}
```

### 4. æ¨¡å—æ³¨å†Œç®¡ç†å™¨ (Module Registry Manager)

**èŒè´£**: ç®¡ç†æ‰€æœ‰æ³¨å†Œæ¨¡å—çš„é”™è¯¯å¤„ç†é…ç½®

**æ•°æ®ç»“æ„**:
```typescript
interface ModuleRegistration {
  moduleId: string;
  moduleName: string;
  version: string;
  responseHandler: ResponseHandler;
  errorPolicies: ErrorPolicy[];
  customRules: CustomRule[];
  dependencies: string[];
  metadata: ModuleMetadata;
}
```

### 5. ç­–ç•¥å¼•æ“ (Policy Engine)

**èŒè´£**: æ‰§è¡Œé”™è¯¯å¤„ç†ç­–ç•¥ï¼Œå†³å®šå¤„ç†æ–¹å¼å’Œå“åº”

**ç­–ç•¥ç±»å‹**:
- **é‡è¯•ç­–ç•¥**: è‡ªåŠ¨é‡è¯•ã€é€€é¿é‡è¯•
- **é™çº§ç­–ç•¥**: åŠŸèƒ½é™çº§ã€æœåŠ¡é™çº§
- **éš”ç¦»ç­–ç•¥**: é”™è¯¯éš”ç¦»ã€ç†”æ–­éš”ç¦»
- **æ¢å¤ç­–ç•¥**: è‡ªåŠ¨æ¢å¤ã€æ‰‹åŠ¨æ¢å¤

### 6. å“åº”æ‰§è¡Œå™¨ (Response Executor)

**èŒè´£**: æ‰§è¡Œå®é™…çš„é”™è¯¯å“åº”é€»è¾‘

**æ‰§è¡Œæ¨¡å¼**:
- **åŒæ­¥æ‰§è¡Œ**: é˜»å¡ç­‰å¾…å¤„ç†ç»“æœ
- **å¼‚æ­¥æ‰§è¡Œ**: éé˜»å¡åå°å¤„ç†
- **æ‰¹å¤„ç†**: æ‰¹é‡å¤„ç†å¤šä¸ªé”™è¯¯

### 7. é”™è¯¯åˆ†ç±»å™¨ (Error Classifier)

**èŒè´£**: å¯¹é”™è¯¯è¿›è¡Œåˆ†ç±»ã€æ ‡è®°å’Œä¼˜å…ˆçº§åˆ’åˆ†

**åˆ†ç±»ç»´åº¦**:
```typescript
interface ErrorClassification {
  // æŒ‰æ¥æºåˆ†ç±»
  source: ErrorSource; // MODULE, SYSTEM, EXTERNAL, NETWORK
  
  // æŒ‰ç±»å‹åˆ†ç±»
  type: ErrorType; // BUSINESS, TECHNICAL, CONFIGURATION, RESOURCE
  
  // æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†ç±»
  severity: ErrorSeverity; // CRITICAL, HIGH, MEDIUM, LOW
  
  // æŒ‰å½±å“èŒƒå›´åˆ†ç±»
  impact: ErrorImpact; // SINGLE_MODULE, MULTIPLE_MODULE, SYSTEM_WIDE
  
  // å¯æ¢å¤æ€§åˆ†ç±»
  recoverability: ErrorRecoverability; // RECOVERABLE, NON_RECOVERABLE, AUTO_RECOVERABLE
}
```

### 8. å“åº”æ¨¡æ¿ç®¡ç† (Response Templates)

**èŒè´£**: ç®¡ç†æ ‡å‡†åŒ–çš„å“åº”æ¨¡æ¿

**æ¨¡æ¿ç±»å‹**:
- **é»˜è®¤å“åº”æ¨¡æ¿** (ä½¿ç”¨UnderConstruction)
- **æ¨¡å—ç‰¹å®šæ¨¡æ¿** (æ¯ä¸ªæ¨¡å—ç‹¬ç«‹ç»´æŠ¤)
- **é”™è¯¯ç±»å‹æ¨¡æ¿** (æŒ‰é”™è¯¯ç±»å‹å®šåˆ¶)
- **åœºæ™¯æ¨¡æ¿** (ç‰¹å®šåœºæ™¯å®šåˆ¶)

### 9. æ¨¡å—é€‚é…å™¨ (Module Adapters)

**èŒè´£**: ä¸ºç‰¹å®šæ¨¡å—æä¾›é€‚é…çš„å“åº”é€»è¾‘

**é€‚é…å™¨è®¾è®¡**:
```typescript
interface ModuleAdapter {
  // æ¨¡å—åŸºæœ¬ä¿¡æ¯
  getModuleInfo(): ModuleInfo;
  
  // æ¨¡å—é”™è¯¯å“åº”é€»è¾‘
  handleModuleError(error: ErrorContext): Promise<ErrorResponse>;
  
  // æ¨¡å—æ³¨é‡ŠåŠŸèƒ½
  createAnnotation(error: ErrorContext): ModuleAnnotation;
  
  // æ¨¡å—ä¾èµ–æ£€æŸ¥
  checkDependencies(): DependencyStatus;
}
```

## ğŸ“ æ•°æ®ç»“æ„å®šä¹‰

### é”™è¯¯ä¸Šä¸‹æ–‡ (ErrorContext)
```typescript
interface ErrorContext {
  // é”™è¯¯å”¯ä¸€æ ‡è¯†
  errorId: string;
  
  // é”™è¯¯åŸºæœ¬ä¿¡æ¯
  error: Error;
  
  // é”™è¯¯æ—¶é—´æˆ³
  timestamp: Date;
  
  // é”™è¯¯æ¥æº
  source: ModuleSource;
  
  // é”™è¯¯åˆ†ç±»
  classification: ErrorClassification;
  
  // é”™è¯¯æ•°æ®
  data: Record<string, any>;
  
  // å¤„ç†é…ç½®
  config: ErrorHandlingConfig;
  
  // å›è°ƒå‡½æ•°
  callback?: (response: ErrorResponse) => void;
}
```

### é”™è¯¯å“åº” (ErrorResponse)
```typescript
interface ErrorResponse {
  // å“åº”ID
  responseId: string;
  
  // é”™è¯¯ID
  errorId: string;
  
  // å¤„ç†ç»“æœ
  result: HandlingResult;
  
  // å“åº”æ—¶é—´
  timestamp: Date;
  
  // å¤„ç†æ—¶é—´
  processingTime: number;
  
  // å“åº”æ•°æ®
  data: ResponseData;
  
  // åç»­æ“ä½œ
  actions: Action[];
  
  // æ³¨é‡Šä¿¡æ¯
  annotations: ModuleAnnotation[];
}
```

### æ¨¡å—æ³¨é‡Š (ModuleAnnotation)
```typescript
interface ModuleAnnotation {
  // æ³¨é‡ŠID
  annotationId: string;
  
  // æ¨¡å—ä¿¡æ¯
  moduleInfo: ModuleInfo;
  
  // æ³¨é‡Šç±»å‹
  type: AnnotationType;
  
  // æ³¨é‡Šå†…å®¹
  content: string;
  
  // åˆ›å»ºæ—¶é—´
  createdAt: Date;
  
  // åˆ›å»ºè€…
  createdBy: string;
  
  // å…³è”ä¿¡æ¯
  related: RelatedInfo;
}
```

## ğŸ”„ ç³»ç»Ÿåˆå§‹åŒ–æµç¨‹

```mermaid
sequenceDiagram
    participant System as ç³»ç»Ÿå¯åŠ¨
    participant EHC as é”™è¯¯å¤„ç†ä¸­å¿ƒ
    participant Registry as æ¨¡å—æ³¨å†Œè¡¨
    participant Modules as å„ä¸ªæ¨¡å—
    
    System->>EHC: é”™è¯¯å¤„ç†ä¸­å¿ƒåˆå§‹åŒ–
    EHC->>EHC: åˆå§‹åŒ–ç»„ä»¶
    EHC->>EHC: åŠ è½½é…ç½®
    EHC->>EHC: éªŒè¯ä¾èµ–
    
    EHC->>Registry: åŒæ­¥æ¨¡å—é”™è¯¯å¤„ç†é…ç½®
    Registry-->>EHC: è¿”å›æ³¨å†Œçš„æ¨¡å—åˆ—è¡¨
    
    EHC->>Modules: é€šçŸ¥é”™è¯¯å¤„ç†ä¸­å¿ƒå°±ç»ª
    Modules-->>EHC: ç¡®è®¤å¹¶æ³¨å†Œé”™è¯¯å¤„ç†å™¨
    
    EHC-->>System: åˆå§‹åŒ–å®Œæˆï¼Œå¼€å§‹æ¥æ”¶é”™è¯¯
```

## ğŸš¨ é”™è¯¯å¤„ç†æµç¨‹

### é˜»å¡å¼é”™è¯¯å¤„ç†æµç¨‹
```mermaid
sequenceDiagram
    participant Module as æ¨¡å—
    participant Gateway as é”™è¯¯æ¥å£é—¨æ§
    participant Queue as é”™è¯¯é˜Ÿåˆ—
    participant Router as å“åº”è·¯ç”±å¼•æ“
    participant Handler as å“åº”å¤„ç†å™¨
    participant Response as å“åº”
    
    Module->>Gateway: handleError(error)
    Gateway->>Queue: åŠ å…¥é”™è¯¯é˜Ÿåˆ—
    Queue->>Router: è·¯ç”±é”™è¯¯
    Router->>Handler: å¤„ç†é”™è¯¯
    Handler->>Handler: æ‰§è¡Œå“åº”é€»è¾‘
    Handler->>Response: ç”Ÿæˆå“åº”
    Response-->>Module: è¿”å›å“åº”ç»“æœ
```

### éé˜»å¡å¼é”™è¯¯å¤„ç†æµç¨‹
```mermaid
sequenceDiagram
    participant Module as æ¨¡å—
    participant Gateway as é”™è¯¯æ¥å£é—¨æ§
    participant Queue as é”™è¯¯é˜Ÿåˆ—
    participant Worker as åå°å·¥ä½œå™¨
    
    Module->>Gateway: handleErrorAsync(error)
    Gateway->>Queue: å¼‚æ­¥åŠ å…¥é˜Ÿåˆ—
    Gateway-->>Module: ç«‹å³è¿”å›
    Queue->>Worker: åå°å¤„ç†
    Worker->>Worker: æ‰§è¡Œå“åº”é€»è¾‘
    Worker->>Module: å›è°ƒé€šçŸ¥ç»“æœï¼ˆå¯é€‰ï¼‰
```

## ğŸ“‹ æ¨¡å—å“åº”éš”ç¦»è®¾è®¡

### æ–‡ä»¶ç»“æ„
```
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ ErrorHandlingCenter/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorHandlingCenter.ts          # ä¸»æ¨¡å—ç±»
â”‚   â”‚   â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorHandlingCenter.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorContext.interface.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorResponse.interface.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ModuleResponse.interface.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorInterfaceGateway.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorQueueManager.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResponseRouterEngine.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ModuleRegistryManager.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PolicyEngine.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResponseExecutor.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorClassifier.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResponseTemplateManager.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ModuleAdapterManager.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RetryStrategy.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CircuitBreakerStrategy.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FallbackStrategy.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RecoveryStrategy.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ adapters/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BaseModuleAdapter.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DefaultModuleAdapter.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ModuleAdapterFactory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DefaultResponseTemplates.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DynamicTemplateLoader.ts
â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â”‚       â”œâ”€â”€ ErrorIdGenerator.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ ErrorClassifier.ts
â”‚   â”‚   â”‚       â””â”€â”€ ErrorHandlerValidator.ts
â”‚   â”‚   â”œâ”€â”€ responses/                                    # æ¨¡å—å“åº”é€»è¾‘ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ DefaultModule.response.ts                 # é»˜è®¤æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseModule.response.ts                    # åŸºç¡€æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigLoaderModule.response.ts             # é…ç½®åŠ è½½æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigValidatorModule.response.ts          # é…ç½®éªŒè¯æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigPersistenceModule.response.ts       # é…ç½®æŒä¹…åŒ–æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ ConfigUIModule.response.ts                 # é…ç½®UIæ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ DebugModule.response.ts                   # è°ƒè¯•æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ StatusLineModule.response.ts              # çŠ¶æ€æ æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â”œâ”€â”€ RouterModule.response.ts                  # è·¯ç”±æ¨¡å—å“åº”
â”‚   â”‚   â”‚   â””â”€â”€ TestModule.response.ts                     # æµ‹è¯•æ¨¡å—å“åº”
â”‚   â”‚   â””â”€â”€ constants/
â”‚   â”‚       â””â”€â”€ ErrorHandlingCenter.constants.ts
â”‚   â”‚   â””â”€â”€ interfaces/
â”‚   â”‚       â””â”€â”€ IErrorHandlingCenter.interface.ts
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â””â”€â”€ ErrorHandlingCenter.types.ts
â”‚   â”‚   â””â”€â”€ README.md
```

### å“åº”æ–‡ä»¶è®¾è®¡åŸåˆ™

1. **æ¨¡å—ç‹¬ç«‹**: æ¯ä¸ªæ¨¡å—çš„é”™è¯¯å“åº”é€»è¾‘ç‹¬ç«‹æ–‡ä»¶ç»´æŠ¤
2. **é…ç½®é©±åŠ¨**: å“åº”é€»è¾‘é€šè¿‡é…ç½®æ–‡ä»¶åŠ¨æ€åŠ è½½
3. **é»˜è®¤å¤„ç†**: ä½¿ç”¨UnderConstructionä½œä¸ºé»˜è®¤å¤„ç†å™¨
4. **ç‰ˆæœ¬ç®¡ç†**: å“åº”é€»è¾‘æ”¯æŒç‰ˆæœ¬æ§åˆ¶
5. **çƒ­æ›´æ–°**: æ”¯æŒè¿è¡Œæ—¶æ›´æ–°å“åº”é€»è¾‘

## âš¡ UnderConstructioné›†æˆ

### åŠŸèƒ½å¢å¼ºéœ€æ±‚

åŸºäºå½“å‰UnderConstructionç±»çš„åˆ†æï¼Œéœ€è¦å¢å¼ºä»¥ä¸‹åŠŸèƒ½ï¼š

1. **æ¨¡å—ä¿¡æ¯å¢å¼º**:
   ```typescript
   interface EnhancedModuleInfo {
     // åŸºç¡€ä¿¡æ¯
     basicInfo: ModuleInfo;
     
     // é”™è¯¯å¤„ç†é…ç½®
     errorHandlingConfig: ErrorHandlingConfig;
     
     // å“åº”é€»è¾‘é…ç½®
     responseConfig: ResponseConfig;
     
     // æ³¨é‡Šé…ç½®
     annotationConfig: AnnotationConfig;
     
     // ä¾èµ–å…³ç³»
     dependencies: ModuleDependency[];
     
     // å…ƒæ•°æ®
     metadata: ModuleMetadata;
   }
   ```

2. **æ³¨é‡ŠåŠŸèƒ½é›†æˆ**:
   ```typescript
   interface AnnotationGenerator {
     createErrorAnnotation(error: ErrorContext): ModuleAnnotation;
     createModuleAnnotation(moduleInfo: ModuleInfo): ModuleAnnotation;
     createDependencyAnnotation(moduleId: string): ModuleAnnotation;
   }
   ```

3. **é»˜è®¤å“åº”é€»è¾‘**:
   ```typescript
   interface DefaultResponseHandler {
     handleWithUnderConstruction(error: ErrorContext): Promise<ErrorResponse>;
     generateModuleComment(moduleInfo: ModuleInfo): string;
     trackModuleStatus(moduleId: string, status: ModuleStatus): void;
   }
   ```

## ğŸ¯ å®æ–½è®¡åˆ’

### é˜¶æ®µ1: åŸºç¡€æ¶æ„æ­å»º
1. åˆ›å»ºé”™è¯¯å¤„ç†ä¸­å¿ƒä¸»æ¨¡å—
2. å®ç°æ ¸å¿ƒæ¥å£å’Œæ•°æ®ç»“æ„
3. å»ºç«‹åˆå§‹åŒ–å’Œé…ç½®ç®¡ç†

### é˜¶æ®µ2: æ ¸å¿ƒç»„ä»¶å®ç°
1. å®ç°é”™è¯¯æ¥å£é—¨æ§å’Œé˜Ÿåˆ—ç®¡ç†
2. å®ç°å“åº”è·¯ç”±å’Œç­–ç•¥å¼•æ“
3. å®ç°æ¨¡å—æ³¨å†Œå’Œå“åº”æ‰§è¡Œ

### é˜¶æ®µ3: æ¨¡å—é€‚é…é›†æˆ
1. å¢å¼ºUnderConstructionç±»åŠŸèƒ½
2. å®ç°æ¨¡å—é€‚é…å™¨å’Œå“åº”æ¨¡æ¿
3. é›†æˆç°æœ‰æ¨¡å—çš„é”™è¯¯å¤„ç†

### é˜¶æ®µ4: æµ‹è¯•å’Œä¼˜åŒ–
1. å•å…ƒæµ‹è¯•å„ä¸ªç»„ä»¶
2. é›†æˆæµ‹è¯•æ•´ä¸ªé”™è¯¯å¤„ç†æµç¨‹
3. æ€§èƒ½ä¼˜åŒ–å’Œé”™è¯¯åœºæ™¯æµ‹è¯•

### é˜¶æ®µ5: éƒ¨ç½²å’Œç›‘æ§
1. é›†æˆåˆ°ç³»ç»Ÿåˆå§‹åŒ–æµç¨‹
2. é…ç½®ç›‘æ§å’Œå‘Šè­¦
3. æ–‡æ¡£å®Œå–„å’ŒåŸ¹è®­

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

- **é”™è¯¯è¦†ç›–ç‡**: 100%çš„ç³»ç»Ÿé”™è¯¯éƒ½èƒ½è¢«é”™è¯¯å¤„ç†ä¸­å¿ƒæ•è·å’Œå¤„ç†
- **å“åº”æ—¶æ•ˆæ€§**: 90%çš„é”™è¯¯èƒ½åœ¨100mså†…å¾—åˆ°å“åº”
- **æ¨¡å—éš”ç¦»æ€§**: æ¯ä¸ªæ¨¡å—çš„é”™è¯¯å“åº”é€»è¾‘å®Œå…¨ç‹¬ç«‹ï¼Œæ— äº¤å‰æ±¡æŸ“
- **ç³»ç»Ÿç¨³å®šæ€§**: é”™è¯¯å¤„ç†ä¸­å¿ƒæœ¬èº«çš„å¯ç”¨æ€§è¾¾åˆ°99.9%
- **å¯ç»´æŠ¤æ€§**: æ–°æ¨¡å—çš„é”™è¯¯å¤„ç†é›†æˆæ—¶é—´å°äº30åˆ†é’Ÿ

## ğŸ” é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
- **æ€§èƒ½å½±å“**: é”™è¯¯å¤„ç†ä¸­å¿ƒå¯èƒ½æˆä¸ºç³»ç»Ÿç“¶é¢ˆ
  - ç¼“è§£æªæ–½: å®ç°å¼‚æ­¥å¤„ç†ã€é˜Ÿåˆ—ç®¡ç†ã€æ€§èƒ½ç›‘æ§

- **å¤æ‚æ€§å¢åŠ **: ç³»ç»Ÿå¤æ‚åº¦æ˜¾è‘—å¢åŠ 
  - ç¼“è§£æªæ–½: æ¨¡å—åŒ–è®¾è®¡ã€æ¸…æ™°æ¥å£ã€å……åˆ†æ–‡æ¡£

### è¿ç»´é£é™©
- **é…ç½®ç®¡ç†**: é”™è¯¯å¤„ç†ç­–ç•¥é…ç½®å¤æ‚
  - ç¼“è§£æªæ–½: é…ç½®ç‰ˆæœ¬æ§åˆ¶ã€é…ç½®éªŒè¯å·¥å…·

- **ç›‘æ§å›°éš¾**: é”™è¯¯å¤„ç†ä¸­å¿ƒçš„ç›‘æ§å’Œè°ƒè¯•
  - ç¼“è§£æªæ–½: ä¸°å¯Œçš„æ—¥å¿—ã€metricsæŒ‡æ ‡ã€è°ƒè¯•æ¥å£

è¯·reviewæ­¤è®¾è®¡æ–‡æ¡£ï¼Œå¦‚æœ‰ä»»ä½•å»ºè®®æˆ–ä¿®æ”¹æ„è§ï¼Œæˆ‘å°†è¿›è¡Œè°ƒæ•´å¹¶å¼€å§‹å®æ–½ã€‚