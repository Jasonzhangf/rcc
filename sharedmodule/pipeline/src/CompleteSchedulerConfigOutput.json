{
  "basic": {
    "schedulerId": "llm-pipeline-scheduler",
    "name": "LLM流水线调度器",
    "version": "1.0.0",
    "description": "用于管理LLM API处理流水线的调度器"
  },
  "loadBalancing": {
    "strategy": "weighted",
    "strategyConfig": {
      "weighted": {
        "weights": {
          "llm-chat-primary": 80,
          "llm-chat-backup": 20,
          "llm-completion-primary": 70,
          "llm-completion-backup": 30
        },
        "enableDynamicWeightAdjustment": true,
        "weightAdjustmentInterval": 60000
      }
    },
    "failover": {
      "enabled": true,
      "maxRetries": 3,
      "retryDelay": 1000,
      "backoffMultiplier": 2,
      "enableCircuitBreaker": true
    }
  },
  "healthCheck": {
    "strategy": "hybrid",
    "intervals": {
      "activeCheckInterval": 30000,
      "passiveCheckInterval": 10000,
      "fullCheckInterval": 300000
    },
    "checks": {
      "basic": {
        "enabled": true,
        "timeout": 5000,
        "endpoint": "/health"
      },
      "detailed": {
        "enabled": true,
        "timeout": 10000,
        "includeMetrics": true,
        "includeDependencies": true
      },
      "custom": {
        "enabled": false,
        "checkFunction": "",
        "parameters": {}
      }
    },
    "thresholds": {
      "healthyThreshold": 2,
      "unhealthyThreshold": 3,
      "degradationThreshold": 1
    },
    "recovery": {
      "autoRecovery": true,
      "recoveryStrategies": [
        {
          "strategyId": "restart-instance",
          "name": "重启实例",
          "conditions": [
            {
              "field": "errorRate",
              "operator": "greater_than",
              "value": 0.5
            }
          ],
          "actions": [
            {
              "type": "restart",
              "parameters": {
                "graceful": true
              },
              "timeout": 30000
            }
          ],
          "priority": 1
        }
      ],
      "maxRecoveryAttempts": 3
    }
  },
  "errorHandling": {
    "errorClassification": {
      "enableAutomaticClassification": true,
      "customClassifiers": [
        {
          "name": "rate-limit-classifier",
          "errorCodeRanges": [429],
          "classificationRules": [
            {
              "field": "response.headers.x-ratelimit-remaining",
              "operator": "less_than",
              "value": 10,
              "classification": {
                "category": "rate_limit",
                "severity": "medium",
                "recoverability": "recoverable"
              }
            }
          ],
          "action": "backoff_and_retry"
        }
      ]
    },
    "strategies": {
      "unrecoverableErrors": {
        "action": "destroy_pipeline",
        "notificationEnabled": true,
        "logLevel": "error"
      },
      "recoverableErrors": {
        "action": "blacklist_temporary",
        "maxRetryAttempts": 3,
        "blacklistDuration": 60000,
        "exponentialBackoff": true
      },
      "authenticationErrors": {
        "action": "enter_maintenance",
        "maintenanceDuration": 300000,
        "credentialRefreshFunction": "refreshApiCredentials"
      },
      "networkErrors": {
        "action": "retry_with_backoff",
        "maxRetryAttempts": 3,
        "backoffMultiplier": 2,
        "bufferSize": 100
      }
    },
    "blacklist": {
      "enabled": true,
      "maxEntries": 1000,
      "defaultDuration": 60000,
      "maxDuration": 3600000,
      "cleanupInterval": 300000,
      "autoExpiry": true
    },
    "reporting": {
      "enableDetailedReporting": true,
      "reportInterval": 60000,
      "includeStackTraces": false,
      "includeContext": true,
      "customReporters": ["slack-alerts", "email-notifications"]
    }
  },
  "performance": {
    "concurrency": {
      "maxConcurrentRequests": 1000,
      "maxConcurrentRequestsPerPipeline": 100,
      "queueSize": 5000,
      "enablePriorityQueue": true
    },
    "timeouts": {
      "defaultTimeout": 30000,
      "executionTimeout": 120000,
      "idleTimeout": 300000,
      "startupTimeout": 60000,
      "shutdownTimeout": 30000
    },
    "caching": {
      "enabled": true,
      "strategy": "lru",
      "maxSize": 10000,
      "ttl": 3600000
    },
    "rateLimiting": {
      "enabled": true,
      "strategy": "token_bucket",
      "requestsPerSecond": 100,
      "burstSize": 200
    }
  },
  "monitoring": {
    "metrics": {
      "enabled": true,
      "collectionInterval": 10000,
      "metrics": [
        {
          "name": "request_count",
          "type": "counter",
          "description": "Total number of requests",
          "labels": {
            "pipeline": ".*",
            "status": ".*"
          }
        },
        {
          "name": "response_time",
          "type": "histogram",
          "description": "Response time distribution",
          "labels": {
            "pipeline": ".*"
          },
          "buckets": [100, 500, 1000, 5000, 10000, 30000]
        }
      ],
      "aggregation": {
        "enabled": true,
        "interval": 60000,
        "functions": ["avg", "sum", "count", "max", "min"]
      }
    },
    "logging": {
      "level": "info",
      "format": "json",
      "outputs": [
        {
          "type": "console",
          "config": {},
          "level": "info"
        },
        {
          "type": "file",
          "config": {
            "path": "/var/log/pipeline.log",
            "rotation": "daily"
          },
          "level": "debug"
        }
      ],
      "sampling": {
        "enabled": true,
        "rate": 0.1
      }
    },
    "tracing": {
      "enabled": true,
      "samplingRate": 0.05,
      "includePayloads": false,
      "customSpans": ["module-execution", "data-transformation"]
    },
    "alerts": {
      "enabled": true,
      "rules": [
        {
          "ruleId": "high-error-rate",
          "name": "高错误率",
          "condition": "error_rate > 0.05",
          "threshold": 0.05,
          "duration": 60000,
          "severity": "high",
          "channels": ["slack", "email"]
        },
        {
          "ruleId": "slow-response-time",
          "name": "响应时间过长",
          "condition": "avg_response_time > 5000",
          "threshold": 5000,
          "duration": 60000,
          "severity": "medium",
          "channels": ["slack"]
        }
      ],
      "channels": [
        {
          "channelId": "slack",
          "name": "Slack通知",
          "type": "slack",
          "config": {
            "webhookUrl": "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK",
            "channel": "#pipeline-alerts"
          },
          "enabled": true
        },
        {
          "channelId": "email",
          "name": "邮件通知",
          "type": "email",
          "config": {
            "smtpServer": "smtp.company.com",
            "port": 587,
            "recipients": ["admin@company.com"]
          },
          "enabled": true
        }
      ]
    }
  },
  "security": {
    "authentication": {
      "enabled": true,
      "method": "jwt",
      "config": {
        "issuer": "pipeline-scheduler",
        "audience": "pipeline-clients",
        "expiration": 3600
      }
    },
    "authorization": {
      "enabled": true,
      "roles": ["admin", "user", "guest"],
      "permissions": {
        "admin": ["read", "write", "delete", "configure"],
        "user": ["read", "write"],
        "guest": ["read"]
      }
    },
    "encryption": {
      "enabled": true,
      "algorithm": "aes-256-gcm",
      "keyRotationInterval": 86400000
    },
    "rateLimiting": {
      "enabled": true,
      "requestsPerMinute": 1000,
      "burstSize": 100
    }
  }
}